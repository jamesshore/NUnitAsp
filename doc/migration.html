<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd ">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <title>NUnitAsp Migration Guide</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <p class="title">NUnitAsp
    <br /><small>ASP.NET unit testing</small></p>

    <table class="layout">
      <tr>
        <td>
          <div class="menu">
            <p><a href="download.html"><b>Download</b></a></p>
            <p>
              <a href="index.html">Overview</a>
              <br /><a href="documentation.html">Documentation</a>
              <br /><a href="support.html">Support</a>
              <br /><a href="consulting.html">Coaching</a>
            </p>
            <p><a href="contribute.html">Contribute</a></p>
            <p><a href="http://sourceforge.net/projects/nunitasp/"><img src=
            "http://sourceforge.net/sflogo.php?group_id=49940" width="88" height="31" border="0" alt="SourceForge Logo" /></a></p>
          </div>
        </td>
        <td>
          <div class="content">
            <h1>Migration Guide</h1>

            <p>In version 1.6, NUnitAsp stopped requiring NUnit.  This change has many benefits, but it isn't backwards compatible.  If you want to use NUnitAsp v1.6, you must upgrade your tests.</p>

            <p>Why did we do this?  The main reason is that, prior to this change, each version of NUnitAsp only worked with one specific version of NUnit.  Whenever a new version of NUnit came out, there was a time lag&mdash;often several months&mdash;before a new version of NUnitAsp came out to support it.  And whenever you upgraded your copy of NUnitAsp, you also had to upgrade your copy of NUnit at the same time, which you might not have wanted to do.</p>

            <p>This change also gives you more choice in testing tools.  NUnitAsp v1.6 works with NUnit, as always, but it should also work with other tools, like MbUnit.  As a side benefit, this change also allowed us to make some simplifications to NUnitAsp's API that we've been wanting to make for a while.</p>

            <p>We've made every effort to make migrating easy.  We've provided migration information as a two-step process.  We start with a quick fix that will keep your tests running.  Then we describe how to change individual tests to the new style over time.</p>


            <h2>Changes in v1.6</h2>

            <p>Let's start by talking about the changes in NUnitAsp v1.6.</p>

            <ul>
              <li><b>WebFormTestCase:</b>  We no longer require test classes to extend our WebFormTestCase.  In fact, it no longer exists.</li>

              <br /><li><b>[SetUp] and [TearDown]:</b>  You can now use the [SetUp] and [TearDown] attributes in your tests.</li>

              <br /><li><b>Browser:</b>  The Browser property (which used to be defined by WebFormTestCase) has been replaced by the static <a href="api/NUnit.Extensions.Asp.HttpClient.Default.html">HttpClient.Default</a> property.</li>

              <br /><li><b>CurrentWebForm:</b>  We no longer require CurrentWebForm when constructing testers.  We have a <a href="api/NUnit.Extensions.Asp.ControlTesterConstructor1.html">new constructor</a> that just takes an ASP ID.  We think this will make tests a lot easier to read and write.</li>
            </ul>

            <p>Here's an example of a test written for NUnitAsp 1.5:</p>

            <p class="code">
              [TestFixture]
              <br /><span class="keyword">public class</span> Before : WebFormTestCase
              <br />{
              <br />&nbsp;&nbsp;[Test]
              <br />&nbsp;&nbsp;<span class="keyword">public void</span> Example()
              <br />&nbsp;&nbsp;{
              <br />&nbsp;&nbsp;&nbsp;&nbsp;LabelTester label = <span class="keyword">new</span> LabelTester("label", CurrentWebForm);
              <br />
              <br />&nbsp;&nbsp;&nbsp;&nbsp;Browser.GetPage("http://localhost/example/example.aspx");
              <br />&nbsp;&nbsp;&nbsp;&nbsp;AssertEquals("Hi!", label);
              <br />&nbsp;&nbsp;}
              <br />}
            </p>

            <p>And here's the same example with NUnitAsp 1.6:</p>

            <p class="code">
              [TestFixture]
              <br /><span class="keyword">public class</span> After
              <br />{
              <br />&nbsp;&nbsp;[Test]
              <br />&nbsp;&nbsp;<span class="keyword">public void</span> Example()
              <br />&nbsp;&nbsp;{
              <br />&nbsp;&nbsp;&nbsp;&nbsp;LabelTester label = <span class="keyword">new</span> LabelTester("label");
              <br />
              <br />&nbsp;&nbsp;&nbsp;&nbsp;HttpClient.Default.GetPage("http://localhost/example/example.aspx");
              <br />&nbsp;&nbsp;&nbsp;&nbsp;Assert.AreEqual("Hi!", label);
              <br />&nbsp;&nbsp;}
              <br />}
            </p>

            <p>The new constructor also lends itself to inline tester instantiation:</p>

            <p class="code">
              &nbsp;&nbsp;[Test]
              <br />&nbsp;&nbsp;<span class="keyword">public void</span> Example()
              <br />&nbsp;&nbsp;{
              <br />&nbsp;&nbsp;&nbsp;&nbsp;HttpClient.Default.GetPage("http://localhost/example/example.aspx");
              <br />&nbsp;&nbsp;&nbsp;&nbsp;Assert.AreEqual("Hi!", <span class="keyword">new</span> LabelTester("label"));
              <br />&nbsp;&nbsp;}
            </p>


            <h2>Migration Process</h2>

            <p>To quickly get your code up and running with NUnitAsp v1.6, simply copy the WebFormTestCase.cs and WebAssertion.cs files into your project.  These files are located in the "bin" directory of the NUnitAsp download package.  These are the files that were removed in v1.6.</p>



            <!--
            makes many things easier, but it isn't backwards compatible.  If you want to use NUnitAsp v1.6, you must upgrade your tests.</p>

            <p>We've made every effort to ease the pain of transition.

            <p>With version 1.2.1, NUnitAsp migrated from NUnit 1.x to NUnit 2.0.  NUnit 2.0 offers many improvements over NUnit 1.x, but it isn't backwards compatible.  Users who wish to use newer versions of NUnitAsp must upgrade.</p>

            <p>Fortunately, we've made every effort to ease the pain of transition.  Migrating to NUnitAsp for NUnit 2.0 is extremely easy.  We would have liked to make it completely seamless, but the NUnit 2.0 architecture didn't allow that.</p>

            <p>There's only two steps to follow when upgrading to NUnit 2.0:</p>

            <ol>
              <li>Upgrade to NUnitAsp 1.2.1 or later.</li>
              <li>Modify your test fixture constructors.</li>
            </ol>

            <p>If your existing test fixture constructors don't have any code, you can simply delete them:</p>

            <p class="code">
              <span class="demph">public class ExampleTest {</span>
              <span class="emph"><br />&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> ExampleTest(<span class="keyword">string</span> name) : <span class="keyword">base</span>(name) {
              <br />&nbsp;&nbsp;&nbsp;}</span>
              <span class="demph"><br />&nbsp;&nbsp;&nbsp;...
              <br />}</span>
            </p>

            <p>Becomes:</p>

            <p class="code">
              <span class="demph">public class ExampleTest {
              <br />&nbsp;&nbsp;&nbsp;...
              <br />}</span>
            </p>

            <p>If your constructor <em>does</em> have code, just remove the parameter:</p>

            <p class="code">
              <span class="demph">public class ExampleTest {</span>
              <span class="emph"><br />&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> ExampleTest(<span class="keyword">string</span> name) : <span class="keyword">base</span>(name) {</span>
              <span class="demph"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DoSomething();
              <br />&nbsp;&nbsp;&nbsp;}
              <br />&nbsp;&nbsp;&nbsp;...
              <br />}</span>
            </p>

            <p>Becomes:</p>

            <p class="code">
              <span class="demph">public class ExampleTest {</span>
              <span class="emph"><br />&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> ExampleTest() {</span>
              <span class="demph"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DoSomething();
              <br />&nbsp;&nbsp;&nbsp;}
              <br />&nbsp;&nbsp;&nbsp;...
              <br />}</span>
            </p>


            <h2>Using NUnit 2.0 with NUnitAsp</h2>

            <p>Because NUnitAsp uses a base class test fixture, WebFormTestCase, NUnitAsp test fixtures are more like NUnit 1.x text fixtures than regular NUnit 2.x test fixtures:</p>

            <ul>
              <li>Override SetUp() rather than using the [SetUp] attribute.</li>
              <li>Override TearDown() rather than using the [TearDown] attribute.</li>
              <li>Use of the [TestFixture] attribute is optional, but recommended.</li>
            </ul>
            -->

            <p class="end">Last updated for v1.5.</p>
          </div>
        </td>
      </tr>
    </table>
  </body>
</html>
